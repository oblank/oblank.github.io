<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  
  <title>React Native 入门问题集 | 白板博客</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  <meta name="description" content="记录一些自己入门遇到的问题与解决方法 怎么将navigation传递到子级组件？当需要在子组件中使用navigation导航时，一种方法是直接在引入组件时将 navigation 作为props传递，另一种是使用 withNavigation，后者更优雅。 方法一：引用时传递1&lt;Component navigation&#x3D;&amp;#123;this.props.navigation&amp;#125; ..">
<meta property="og:type" content="article">
<meta property="og:title" content="React Native 入门问题集">
<meta property="og:url" content="https://oblank.com/2018/04/09/react-native-questions/index.html">
<meta property="og:site_name" content="白板博客">
<meta property="og:description" content="记录一些自己入门遇到的问题与解决方法 怎么将navigation传递到子级组件？当需要在子组件中使用navigation导航时，一种方法是直接在引入组件时将 navigation 作为props传递，另一种是使用 withNavigation，后者更优雅。 方法一：引用时传递1&lt;Component navigation&#x3D;&amp;#123;this.props.navigation&amp;#125; ..">
<meta property="og:locale">
<meta property="article:published_time" content="2018-04-09T10:17:53.000Z">
<meta property="article:modified_time" content="2023-09-11T10:52:45.437Z">
<meta property="article:author" content="oBlank">
<meta property="article:tag" content="ReactNative">
<meta property="article:tag" content="程序员">
<meta name="twitter:card" content="summary">
  
    <link rel="alternate" href="/atom.xml" title="白板博客" type="application/atom+xml">
  
  
    <link rel="icon" href="/favicon.png">
  
  
    <link href="//fonts.googleapis.com/css?family=Source+Code+Pro" rel="stylesheet" type="text/css">
  
  
<link rel="stylesheet" href="/css/style.css">

  

<meta name="generator" content="Hexo 6.3.0"></head>

<body>
  <div id="container">
    <div id="wrap">
      <header id="header">
  <div id="banner"></div>
  <div id="header-outer" class="outer">
    <div id="header-title" class="inner">
      <h1 id="logo-wrap">
        <a href="/" id="logo">白板博客</a>
      </h1>
      
    </div>
    <div id="header-inner" class="inner">
      <nav id="main-nav">
        <a id="main-nav-toggle" class="nav-icon"></a>
        
          <a class="main-nav-link" href="/">Home</a>
        
          <a class="main-nav-link" href="/archives">Archives</a>
        
      </nav>
      <nav id="sub-nav">
        
          <a id="nav-rss-link" class="nav-icon" href="/atom.xml" title="RSS Feed"></a>
        
        <a id="nav-search-btn" class="nav-icon" title="Search"></a>
      </nav>
      <div id="search-form-wrap">
        <form action="//google.com/search" method="get" accept-charset="UTF-8" class="search-form"><input type="search" name="q" class="search-form-input" placeholder="Search"><button type="submit" class="search-form-submit">&#xF002;</button><input type="hidden" name="sitesearch" value="https://oblank.com"></form>
      </div>
    </div>
  </div>
</header>
      <div class="outer">
        <section id="main"><article id="post-react-native-questions" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2018/04/09/react-native-questions/" class="article-date">
  <time datetime="2018-04-09T10:17:53.000Z" itemprop="datePublished">2018-04-09</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/%E5%BC%80%E5%8F%91/">开发</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 class="article-title" itemprop="name">
      React Native 入门问题集
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>记录一些自己入门遇到的问题与解决方法</p>
<h2 id="怎么将navigation传递到子级组件？"><a href="#怎么将navigation传递到子级组件？" class="headerlink" title="怎么将navigation传递到子级组件？"></a>怎么将navigation传递到子级组件？</h2><p>当需要在子组件中使用<code>navigation</code>导航时，一种方法是直接在引入组件时将 navigation 作为props传递，另一种是使用 <code>withNavigation</code>，后者更优雅。</p>
<h3 id="方法一：引用时传递"><a href="#方法一：引用时传递" class="headerlink" title="方法一：引用时传递"></a>方法一：引用时传递</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;Component navigation=&#123;this.props.navigation&#125; ...otherProps /&gt;</span><br></pre></td></tr></table></figure>
<h3 id="方法二：使用-withNavigation，-参见官方文档"><a href="#方法二：使用-withNavigation，-参见官方文档" class="headerlink" title="方法二：使用 withNavigation， 参见官方文档"></a>方法二：使用 <code>withNavigation</code>， <a target="_blank" rel="noopener" href="https://reactnavigation.org/docs/connecting-navigation-prop.html">参见官方文档</a></h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">import React from &#x27;react&#x27;;  </span><br><span class="line">import &#123; Button &#125; from &#x27;react-native&#x27;;  </span><br><span class="line">import &#123; withNavigation &#125; from &#x27;react-navigation&#x27;;  </span><br><span class="line"></span><br><span class="line">class Component extends React.Component &#123;  </span><br><span class="line">	render() &#123;  </span><br><span class="line">		return &lt;Button title=&quot;Back&quot; onPress=&#123;() =&gt; &#123; this.props.navigation.goBack() &#125;&#125; /&gt;;</span><br><span class="line">	&#125;  </span><br><span class="line">&#125;  </span><br><span class="line"></span><br><span class="line">// 用withNavigation包一下</span><br><span class="line">export default withNavigation(Component);</span><br></pre></td></tr></table></figure>
<p>然后在引入时更直接：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;Component ...otherProps /&gt;</span><br></pre></td></tr></table></figure>
<h2 id="RN在iOS真机、模拟器调试时网络兼容问题"><a href="#RN在iOS真机、模拟器调试时网络兼容问题" class="headerlink" title="RN在iOS真机、模拟器调试时网络兼容问题"></a>RN在iOS真机、模拟器调试时网络兼容问题</h2><p>在RN生成的XCode项目里，默认是通过远程方式调试，只要手机、模拟器处于同一网络即可，但我们的手机极有可能会切换网络（譬如上下班、吃饭、上厕所…等等），而这会导到远程调试的应用无法打开，可以兼容处理。</p>
<p>打开XCode项目，修改 <code>AppDelegate.m</code>，将原有的</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">jsCodeLocation = [[RCTBundleURLProvider sharedSettings] jsBundleURLForBundleRoot:@&quot;index&quot; fallbackResource:nil];</span><br></pre></td></tr></table></figure>
<p>修改成</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">#if TARGET_IPHONE_SIMULATOR</span><br><span class="line">  // remote debug</span><br><span class="line"> jsCodeLocation = [[RCTBundleURLProvider sharedSettings] jsBundleURLForBundleRoot:@&quot;index&quot; fallbackResource:nil];</span><br><span class="line"> #else</span><br><span class="line">  // release</span><br><span class="line"> jsCodeLocation = [[NSBundle  mainBundle] URLForResource:@&quot;main&quot;  withExtension:@&quot;jsbundle&quot;];</span><br><span class="line"> #endif</span><br></pre></td></tr></table></figure>
<p>这会将真机像发布时一样把文件打包进APP，不受网络切换影响</p>
<h2 id="获取组件的屏幕位置"><a href="#获取组件的屏幕位置" class="headerlink" title="获取组件的屏幕位置"></a>获取组件的屏幕位置</h2><p>当使用<code>react-native-modal-popover</code>组件时，有一个参数<code>fromRect</code>用来指明组件的位置，这时候我们取要获取组件的位置，使用<code>NativeModules.UIManager.measure</code></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line">import React, &#123; Component &#125; from &#x27;react&#x27;; </span><br><span class="line">import &#123;</span><br><span class="line">  StyleSheet,</span><br><span class="line">  Text,</span><br><span class="line">  View,</span><br><span class="line">  TouchableOpacity,</span><br><span class="line">  findNodeHandle,</span><br><span class="line">  NativeModules </span><br><span class="line">&#125; from &#x27;react-native&#x27;;</span><br><span class="line">import Popover, &#123; PopoverTouchable &#125; from &#x27;react-native-modal-popover&#x27;;</span><br><span class="line"></span><br><span class="line">....</span><br><span class="line"></span><br><span class="line">const handle = findNodeHandle(this.refs[ &#x27;popoverAnchor&#x27; ]); </span><br><span class="line">if (handle) &#123;</span><br><span class="line">    NativeModules.UIManager.measure(handle, (x0, y0, width, height, x, y) =&gt; &#123;</span><br><span class="line">    this.setState(&#123;</span><br><span class="line">		popoverAnchor: &#123; x, y, width, height &#125;,</span><br><span class="line">	&#125;);</span><br><span class="line">  &#125;); </span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">....</span><br><span class="line"></span><br><span class="line">&lt;SimpleLineIcons</span><br><span class="line">    name=&quot;options&quot;</span><br><span class="line">    ref=&quot;popoverAnchor&quot;</span><br><span class="line">    ...otherProps</span><br><span class="line">/&gt;</span><br><span class="line">&lt;Popover</span><br><span class="line">    visible=&#123;this.state.showPopover&#125;</span><br><span class="line">    fromRect=&#123;this.state.popoverAnchor&#125;</span><br><span class="line">    ...otherProps</span><br><span class="line">&gt;</span><br><span class="line">    &#123;children&#125;</span><br><span class="line">&lt;/Popover&gt;</span><br></pre></td></tr></table></figure>

<h2 id="基于webview实现简易浏览器"><a href="#基于webview实现简易浏览器" class="headerlink" title="基于webview实现简易浏览器"></a>基于webview实现简易浏览器</h2><p>在APP内经常需要打开一些URL链接，如果通过外部浏览器打开、返回体验不好，一般会做一个内部的导航，用RN的WebView组件很容易实现，主要是利用<code>onNavigationStateChange</code>获得各种状态并处理各导航菜单的表现，同时利用<code>navigation.setParams</code>动态设置浏览器的标题栏。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br></pre></td><td class="code"><pre><span class="line">...</span><br><span class="line">goBack() &#123;</span><br><span class="line">    this.refs[ WEB_VIEW_REF ].goBack(); &#125;</span><br><span class="line"></span><br><span class="line">goForward() &#123;</span><br><span class="line">    this.refs[ WEB_VIEW_REF ].goForward(); &#125;</span><br><span class="line"></span><br><span class="line">reload() &#123;</span><br><span class="line">    self.refs[ WEB_VIEW_REF ].reload(); &#125;</span><br><span class="line"></span><br><span class="line">openShare() &#123;</span><br><span class="line">    Share.share(&#123; message: &#x27;content&#x27;, title: &#x27;testshare&#x27; &#125;)</span><br><span class="line">        .catch((error) =&gt; console.error(error)); &#125;</span><br><span class="line"></span><br><span class="line">openWithSafari() &#123;</span><br><span class="line">    Linking.openURL(this.state.currentUrl)</span><br><span class="line">        .catch(err =&gt; console.error(&#x27;An error occurred&#x27;, err)); &#125;</span><br><span class="line"></span><br><span class="line">onNavigationStateChange(navState) &#123;</span><br><span class="line">	this.setState(&#123;</span><br><span class="line">	  backButtonEnabled : navState.canGoBack,</span><br><span class="line">	  forwardButtonEnabled: navState.canGoForward,</span><br><span class="line">	  currentUrl : navState.url,</span><br><span class="line">	  status : navState.title,</span><br><span class="line">	  loading : navState.loading,</span><br><span class="line">	  scalesPageToFit : true</span><br><span class="line">	&#125;);</span><br><span class="line"></span><br><span class="line">	// 动态更新 headerTitle</span><br><span class="line">	if (navState.title) &#123;</span><br><span class="line">		this.props.navigation.setParams(&#123; title: navState.title &#125;)</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">...</span><br><span class="line"></span><br><span class="line">&lt;WebView</span><br><span class="line">    ref=&#123;WEB_VIEW_REF&#125;</span><br><span class="line">    source=&#123;&#123; uri: url &#125;&#125;</span><br><span class="line">    style=&#123;styles.webView&#125;</span><br><span class="line">    scalesPageToFit=&#123;true&#125;</span><br><span class="line">    startInLoadingState=&#123;true&#125;</span><br><span class="line">    onNavigationStateChange=&#123;(e) =&gt; this.onNavigationStateChange(e)&#125;</span><br><span class="line">/&gt;</span><br><span class="line">&lt;View style=&#123;styles.toolbar&#125;&gt;</span><br><span class="line">  &#123;/*退回*/&#125;</span><br><span class="line">  &#123;</span><br><span class="line">	!this.state.backButtonEnabled &amp;&amp; (</span><br><span class="line">		&lt;View style=&#123;[ styles.toolBtn ]&#125;&gt;</span><br><span class="line">			&lt;SimpleLineIcons name=&#x27;arrow-left&#x27; size=&#123;18&#125; style=&#123;[ styles.headerIcon, styles.headerIconDisable ]&#125;/&gt;</span><br><span class="line">		&lt;/View&gt;  )</span><br><span class="line">    &#125;</span><br><span class="line">    &#123;</span><br><span class="line">        this.state.backButtonEnabled &amp;&amp; (</span><br><span class="line">            &lt;TouchableOpacity style=&#123;styles.toolBtn&#125; onPress=&#123;() =&gt; this.goBack()&#125;&gt;</span><br><span class="line">		&lt;SimpleLineIcons name=&#x27;arrow-left&#x27; size=&#123;18&#125; style=&#123;[ styles.headerIcon ]&#125;/&gt;</span><br><span class="line">	    &lt;/TouchableOpacity&gt;  )</span><br><span class="line">    &#125;</span><br><span class="line">...other buttons</span><br><span class="line">&lt;/View&gt;</span><br></pre></td></tr></table></figure>

<h2 id="使用react-navigation的TabNavigator时Tab之间跳转不能正常返回的情况"><a href="#使用react-navigation的TabNavigator时Tab之间跳转不能正常返回的情况" class="headerlink" title="使用react-navigation的TabNavigator时Tab之间跳转不能正常返回的情况"></a>使用<code>react-navigation</code>的<code>TabNavigator</code>时Tab之间跳转不能正常返回的情况</h2><p>如果TabA、TabB同时是<code>StackNavigator</code>，当从一个TabA跳到另一个TabB里的某个路由时，返回时常常会处于TabB中而无法正常返回到TabA，一种方法是修改顶部左侧菜单自定义实现返回逻辑，但这种情况下右滑返回手势仍然不能正常返回到TabA。</p>
<p>换种思维，直接将TabA要跳转的页面引入到相应的Tab路由中，代码仍然是一套，只是配了两个路由，路由名字略微不同即可:</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">export const RouteHome = StackNavigator(&#123;</span><br><span class="line">  Home : &#123; screen: Views.Home &#125;,</span><br><span class="line">  HBrowser: &#123; screen: Views.Browser &#125;,</span><br><span class="line">  Scanner : &#123; screen: Views.Scanner &#125;, </span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line">export const RouteSetting = StackNavigator(&#123;</span><br><span class="line">  Setting : &#123; screen: Views.Home &#125;,</span><br><span class="line">  Browser: &#123; screen: Views.Browser &#125;,</span><br><span class="line">  ScannerB : &#123; screen: Views.Scanner &#125;, </span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>
<p>上面的 <code>HBrowser</code>、<code>Browser</code>用了相同的组件，但路由名不同，在<code>Home</code>路由中按需跳转<code>HBrowser</code>，在<code>Setting</code>中就按需跳转<code>Browser</code>，这样兼顾了代码复用与交互的问题。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">......</span><br><span class="line">&lt;Hyperlink</span><br><span class="line">  onPress=&#123; (url, text) =&gt; &#123;</span><br><span class="line">        if (navigation.state &amp;&amp; navigation.state.routeName === &#x27;Home&#x27;) &#123;</span><br><span class="line">            this.props.navigation.navigate(&#x27;HBrowser&#x27;, &#123;url: url, text: text&#125;)</span><br><span class="line">        &#125; else &#123;</span><br><span class="line">            this.props.navigation.navigate(&#x27;Browser&#x27;, &#123;url: url, text: text&#125;)</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;&#125;</span><br><span class="line">    linkStyle=&#123;styles.url&#125;</span><br><span class="line">&gt;</span><br><span class="line"> &lt;Text style=&#123;styles.content&#125; selectable=&#123;true&#125; selectable=&#123;true&#125;&gt;</span><br><span class="line">  &#123;item.content&#125;</span><br><span class="line"> &lt;/Text&gt; </span><br><span class="line">&lt;/Hyperlink&gt;</span><br><span class="line">......</span><br></pre></td></tr></table></figure>
<p><strong>UPDATE:</strong> 经测试，不同StackNavigator里可以包含同名路由，导航时会优先从该Stack里寻找路由，所以上面的路由在取名时不需要刻意规避，简化如下：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">const BaseRoutes = &#123;</span><br><span class="line">  Browser: &#123; screen: Views.Browser &#125;,</span><br><span class="line">  Scanner : &#123; screen: Views.Scanner &#125;, </span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line">export const RouteHome = StackNavigator(&#123;</span><br><span class="line">  Home : &#123; screen: Views.Home &#125;,</span><br><span class="line">  ...BaseRoutes, </span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line">export const RouteSetting = StackNavigator(&#123;</span><br><span class="line">  Setting : &#123; screen: Views.Home &#125;,</span><br><span class="line">  ...BaseRoutes, </span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>
<p>导航时不再区分路由名：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">......</span><br><span class="line">&lt;Hyperlink</span><br><span class="line">  onPress=&#123; (url, text) =&gt; &#123;</span><br><span class="line">	this.props.navigation.navigate(&#x27;Browser&#x27;, &#123;url: url, text: text&#125;)</span><br><span class="line">  &#125;&#125;</span><br><span class="line">  linkStyle=&#123;styles.url&#125;</span><br><span class="line">&gt;</span><br><span class="line"> &lt;Text style=&#123;styles.content&#125; selectable=&#123;true&#125; selectable=&#123;true&#125;&gt;</span><br><span class="line">  &#123;item.content&#125;</span><br><span class="line"> &lt;/Text&gt; </span><br><span class="line">&lt;/Hyperlink&gt;</span><br><span class="line">......</span><br></pre></td></tr></table></figure>
<h2 id="StackNavigator里嵌套了TabNavigator"><a href="#StackNavigator里嵌套了TabNavigator" class="headerlink" title="StackNavigator里嵌套了TabNavigator"></a>StackNavigator里嵌套了TabNavigator</h2><p>如果TabNavigator里的Views是根据程序动态生成的，那边多半面临导航找不到路由的问题</p>
<p>同时如果组件既在TabNavigator里使用，也有可能直接在StackNavigator里使用，这个时候 <code>navigation</code>指向不同，需要特殊处理才能兼容</p>
<p>具体方法，参考：<a target="_blank" rel="noopener" href="https://github.com/react-navigation/react-navigation/issues/335">https://github.com/react-navigation/react-navigation/issues/335</a></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">// Community   : CommunityTabs, // 这个方法不能让子级最高层级的 TabBar的情况，譬如按需隐藏 </span><br><span class="line">Community : &#123; screen: (&#123; navigation &#125;) =&gt; &lt;TabsNavigator screenProps=&#123;&#123; navigation &#125;&#125;/&gt; &#125;,</span><br><span class="line"></span><br><span class="line">...</span><br><span class="line"></span><br><span class="line">// 调用时做一些处理</span><br><span class="line">navigate = (route, payload) =&gt; &#123;</span><br><span class="line">    if (this.props.screenProps) &#123;</span><br><span class="line">        this.props.screenProps.navigation.navigate(route, payload)</span><br><span class="line">    &#125; else &#123;</span><br><span class="line">        this.props.navigation.navigate(route, payload)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line">...</span><br></pre></td></tr></table></figure>

      
    </div>
    <footer class="article-footer">
      <a data-url="https://oblank.com/2018/04/09/react-native-questions/" data-id="clmh8oaa8000dj6dnaswn44hp" class="article-share-link">Share</a>
      
      
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/ReactNative/" rel="tag">ReactNative</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/%E7%A8%8B%E5%BA%8F%E5%91%98/" rel="tag">程序员</a></li></ul>

    </footer>
  </div>
  
    
<nav id="article-nav">
  
    <a href="/2018/06/14/fabric-install/" id="article-nav-newer" class="article-nav-link-wrap">
      <strong class="article-nav-caption">Newer</strong>
      <div class="article-nav-title">
        
          Hypleder Fabric 体验
        
      </div>
    </a>
  
  
    <a href="/2018/04/09/things-about-nginx/" id="article-nav-older" class="article-nav-link-wrap">
      <strong class="article-nav-caption">Older</strong>
      <div class="article-nav-title">用Nginx代理解决一些问题总结</div>
    </a>
  
</nav>

  
</article>

</section>
        
          <aside id="sidebar">
  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Categories</h3>
    <div class="widget">
      <ul class="category-list"><li class="category-list-item"><a class="category-list-link" href="/categories/%E5%AD%A6%E4%B9%A0/">学习</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/%E5%AD%A6%E4%B9%A0/%E6%80%9D%E8%80%83/">思考</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/%E5%AD%A6%E4%B9%A0/%E6%80%9D%E8%80%83/%E8%AE%BE%E8%AE%A1/">设计</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/%E5%AD%A6%E4%B9%A0/%E6%80%9D%E8%80%83/%E8%AE%BE%E8%AE%A1/%E8%BF%90%E8%90%A5/">运营</a></li></ul></li></ul></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/%E5%BC%80%E5%8F%91/">开发</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/%E6%80%9D%E8%80%83/">思考</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/%E8%BF%90%E8%90%A5/">运营</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/%E9%97%B2%E8%AF%9D/">闲话</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Tags</h3>
    <div class="widget">
      <ul class="tag-list" itemprop="keywords"><li class="tag-list-item"><a class="tag-list-link" href="/tags/Airpods/" rel="tag">Airpods</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/HuntNew/" rel="tag">HuntNew</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/KeyNote/" rel="tag">KeyNote</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/PDF/" rel="tag">PDF</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/ProductHunt/" rel="tag">ProductHunt</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/ReactNative/" rel="tag">ReactNative</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/blockchain/" rel="tag">blockchain</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/fabric/" rel="tag">fabric</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/growth-hack/" rel="tag">growth hack</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/nginx/" rel="tag">nginx</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/why/" rel="tag">why</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E4%B8%89%E6%98%9F%E5%A0%86/" rel="tag">三星堆</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E5%8D%9A%E5%AE%A2/" rel="tag">博客</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E5%9B%B0%E6%81%BC/" rel="tag">困恼</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E5%A2%9E%E9%95%BF%E9%BB%91%E5%AE%A2/" rel="tag">增长黑客</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E7%A8%8B%E5%BA%8F%E5%91%98/" rel="tag">程序员</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E8%80%83%E5%8F%A4/" rel="tag">考古</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E8%8B%B9%E6%9E%9C/" rel="tag">苹果</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E8%AF%B4%E6%98%8E/" rel="tag">说明</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E8%BF%90%E7%BB%B4/" rel="tag">运维</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Tag Cloud</h3>
    <div class="widget tagcloud">
      <a href="/tags/Airpods/" style="font-size: 10px;">Airpods</a> <a href="/tags/HuntNew/" style="font-size: 10px;">HuntNew</a> <a href="/tags/KeyNote/" style="font-size: 10px;">KeyNote</a> <a href="/tags/PDF/" style="font-size: 10px;">PDF</a> <a href="/tags/ProductHunt/" style="font-size: 10px;">ProductHunt</a> <a href="/tags/ReactNative/" style="font-size: 10px;">ReactNative</a> <a href="/tags/blockchain/" style="font-size: 10px;">blockchain</a> <a href="/tags/fabric/" style="font-size: 10px;">fabric</a> <a href="/tags/growth-hack/" style="font-size: 10px;">growth hack</a> <a href="/tags/nginx/" style="font-size: 10px;">nginx</a> <a href="/tags/why/" style="font-size: 10px;">why</a> <a href="/tags/%E4%B8%89%E6%98%9F%E5%A0%86/" style="font-size: 10px;">三星堆</a> <a href="/tags/%E5%8D%9A%E5%AE%A2/" style="font-size: 10px;">博客</a> <a href="/tags/%E5%9B%B0%E6%81%BC/" style="font-size: 10px;">困恼</a> <a href="/tags/%E5%A2%9E%E9%95%BF%E9%BB%91%E5%AE%A2/" style="font-size: 10px;">增长黑客</a> <a href="/tags/%E7%A8%8B%E5%BA%8F%E5%91%98/" style="font-size: 10px;">程序员</a> <a href="/tags/%E8%80%83%E5%8F%A4/" style="font-size: 10px;">考古</a> <a href="/tags/%E8%8B%B9%E6%9E%9C/" style="font-size: 10px;">苹果</a> <a href="/tags/%E8%AF%B4%E6%98%8E/" style="font-size: 10px;">说明</a> <a href="/tags/%E8%BF%90%E7%BB%B4/" style="font-size: 10px;">运维</a>
    </div>
  </div>

  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Archives</h3>
    <div class="widget">
      <ul class="archive-list"><li class="archive-list-item"><a class="archive-list-link" href="/archives/2023/09/">September 2023</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2022/07/">July 2022</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/12/">December 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/06/">June 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/04/">April 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2016/04/">April 2016</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2016/02/">February 2016</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Recent Posts</h3>
    <div class="widget">
      <ul>
        
          <li>
            <a href="/2023/09/11/san-xing-dui/">奇葩三星堆</a>
          </li>
        
          <li>
            <a href="/2022/07/06/airpods-hurt-my-ears/">仅79元，修复Airpods Pro导致耳朵过敏的民间配方</a>
          </li>
        
          <li>
            <a href="/2018/12/10/keynotes-gather/">前公司两份PPT分享</a>
          </li>
        
          <li>
            <a href="/2018/06/14/fabric-install/">Hypleder Fabric 体验</a>
          </li>
        
          <li>
            <a href="/2018/04/09/react-native-questions/">React Native 入门问题集</a>
          </li>
        
      </ul>
    </div>
  </div>

  
</aside>
        
      </div>
      <footer id="footer">
  
  <div class="outer">
    <div id="footer-info" class="inner">
      &copy; 2023 oBlank<br>
      Powered by <a href="http://hexo.io/" target="_blank">Hexo</a>
    </div>
  </div>
</footer>
    </div>
    <nav id="mobile-nav">
  
    <a href="/" class="mobile-nav-link">Home</a>
  
    <a href="/archives" class="mobile-nav-link">Archives</a>
  
</nav>
    

<script src="//ajax.googleapis.com/ajax/libs/jquery/2.0.3/jquery.min.js"></script>


  
<link rel="stylesheet" href="/fancybox/jquery.fancybox.css">

  
<script src="/fancybox/jquery.fancybox.pack.js"></script>




<script src="/js/script.js"></script>


  </div>
</body>
</html>